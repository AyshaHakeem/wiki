{% from "templates/wiki/macros/buttons.html" import render_icon %}

<header class="hidden xl:flex items-center justify-end gap-2 px-6 py-3 border-b border-[var(--outline-gray-1)] bg-[var(--surface-white)] sticky top-0 z-30"
        x-data>
    {# Text navigation links (items without icons) #}
    {% for item in navbar_items %}
        {% if not item.icon %}
        <a href="{{ item.url }}"
           target="_blank" rel="noopener noreferrer"
           class="px-3 py-1.5 text-sm font-medium text-[var(--ink-gray-5)] hover:text-[var(--ink-gray-9)] rounded-md transition-colors duration-200">
            {{ item.label }}
        </a>
        {% endif %}
    {% endfor %}

    {# Separator before toggle (only if there are text links) #}
    {% set has_text_items = namespace(value=false) %}
    {% for item in navbar_items %}
        {% if not item.icon %}
            {% set has_text_items.value = true %}
        {% endif %}
    {% endfor %}
    {% if has_text_items.value %}
    <div class="w-px h-5 bg-[var(--outline-gray-2)] mx-1"></div>
    {% endif %}

    {# Theme Toggle - Compact pill style #}
    <button @click="$store.theme.toggle()"
            title="Toggle theme"
            class="relative flex items-center w-12 h-6 p-0.5 bg-[var(--surface-gray-2)] rounded-full transition-colors duration-200 cursor-pointer">
        <div class="absolute flex items-center justify-center w-5 h-5 bg-[var(--surface-white)] rounded-full shadow-sm transition-all duration-200"
             :class="$store.theme.isDark ? 'translate-x-6' : 'translate-x-0'">
            <template x-if="$store.theme.isDark">
                {{ render_icon("moon", "w-3 h-3 text-[var(--ink-gray-7)]") }}
            </template>
            <template x-if="!$store.theme.isDark">
                {{ render_icon("sun", "w-3 h-3 text-[var(--ink-gray-7)]") }}
            </template>
        </div>
    </button>

    {# Separator before icons (only if there are icon items) #}
    {% set has_icon_items = namespace(value=false) %}
    {% for item in navbar_items %}
        {% if item.icon %}
            {% set has_icon_items.value = true %}
        {% endif %}
    {% endfor %}
    {% if has_icon_items.value %}
    <div class="w-px h-5 bg-[var(--outline-gray-2)] mx-1"></div>
    {% endif %}

    {# Icon links (known services like GitHub, Discord) #}
    {% for item in navbar_items %}
        {% if item.icon %}
        <a href="{{ item.url }}"
           target="_blank" rel="noopener noreferrer"
           title="{{ item.label }}"
           class="p-1.5 text-[var(--ink-gray-5)] hover:text-[var(--ink-gray-9)] transition-colors duration-200">
            {{ render_icon(item.icon, "w-5 h-5") }}
        </a>
        {% endif %}
    {% endfor %}
</header>
